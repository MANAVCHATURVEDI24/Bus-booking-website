<div class="notification-center">
  <!-- Notification Bell Icon -->
  <div class="notification-bell" (click)="toggleNotificationCenter()">
    <mat-icon class="bell-icon">notifications</mat-icon>
    <span class="notification-badge" *ngIf="unreadCount > 0">{{ unreadCount > 99 ? '99+' : unreadCount }}</span>
  </div>

  <!-- Notification Dropdown -->
  <div class="notification-dropdown" [class.open]="isOpen" *ngIf="isOpen">
    <div class="notification-header">
      <h3>Notifications</h3>
      <div class="header-actions">
        <button class="mark-all-read" (click)="markAllAsRead()" *ngIf="unreadCount > 0">
          <mat-icon>done_all</mat-icon>
          Mark all read
        </button>
        <button class="close-btn" (click)="toggleNotificationCenter()">
          <mat-icon>close</mat-icon>
        </button>
      </div>
    </div>

    <div class="notification-content">
      <!-- Loading State -->
      <div class="loading-state" *ngIf="isLoading">
        <div class="loading-spinner"></div>
        <p>Loading notifications...</p>
      </div>

      <!-- Empty State -->
      <div class="empty-state" *ngIf="!isLoading && notifications.length === 0">
        <mat-icon class="empty-icon">notifications_none</mat-icon>
        <h4>No notifications yet</h4>
        <p>We'll notify you when something important happens.</p>
      </div>

      <!-- Notifications List -->
      <div class="notifications-list" *ngIf="!isLoading && notifications.length > 0">
        <div 
          *ngFor="let notification of notifications; trackBy: trackByNotificationId"
          [class]="getNotificationClass(notification)"
          (click)="onNotificationClick(notification)">
          
          <div class="notification-icon">
            <mat-icon [class]="notification.type">{{ getNotificationIcon(notification.type) }}</mat-icon>
          </div>
          
          <div class="notification-content-item">
            <div class="notification-title">{{ notification.title }}</div>
            <div class="notification-message">{{ notification.message }}</div>
            <div class="notification-time">{{ formatTime(notification.createdAt) }}</div>
          </div>
          
          <div class="notification-actions">
            <button 
              class="action-btn read-btn" 
              (click)="markAsRead(notification); $event.stopPropagation()"
              *ngIf="!notification.readAt"
              title="Mark as read">
              <mat-icon>visibility</mat-icon>
            </button>
            <button 
              class="action-btn delete-btn" 
              (click)="deleteNotification(notification); $event.stopPropagation()"
              title="Delete">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </div>
      </div>

      <!-- Load More Button -->
      <div class="load-more" *ngIf="notifications.length >= 20">
        <button class="load-more-btn">Load More</button>
      </div>
    </div>
  </div>
</div>

<!-- Overlay -->
<div class="notification-overlay" *ngIf="isOpen" (click)="toggleNotificationCenter()"></div>