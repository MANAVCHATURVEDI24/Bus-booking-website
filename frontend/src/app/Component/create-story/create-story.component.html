<div class="create-story-container theme-bg-primary min-h-screen">
  <div class="container mx-auto px-4 py-8">
    
    <!-- Header -->
    <div class="header mb-8">
      <button (click)="goBack()" class="back-btn mb-4">
        <i class="fas fa-arrow-left mr-2"></i>
        Back to Community
      </button>
      <h1 class="text-3xl font-bold theme-text-primary mb-2">Share Your Travel Story</h1>
      <p class="theme-text-secondary">Tell fellow travelers about your bus journey experience</p>
    </div>

    <!-- Story Form -->
    <div class="story-form theme-bg-card rounded-lg p-6 max-w-4xl mx-auto">
      <form (ngSubmit)="onSubmit()" #storyForm="ngForm">
        
        <!-- Title -->
        <div class="form-group mb-6">
          <label class="form-label">Story Title *</label>
          <input 
            type="text" 
            [(ngModel)]="story.title"
            name="title"
            required
            maxlength="100"
            placeholder="Give your story an engaging title..."
            class="form-input">
          <div class="form-help">{{ story.title.length }}/100 characters</div>
        </div>

        <!-- Category -->
        <div class="form-group mb-6">
          <label class="form-label">Category *</label>
          <div class="category-grid">
            <label 
              *ngFor="let category of categories"
              class="category-option">
              <input 
                type="radio" 
                [(ngModel)]="story.category"
                name="category"
                [value]="category.value"
                class="sr-only">
              <div [class]="'category-card ' + (story.category === category.value ? 'selected' : '')">
                <i [class]="category.icon + ' text-2xl mb-2'"></i>
                <span class="font-medium">{{ category.label }}</span>
              </div>
            </label>
          </div>
        </div>

        <!-- Route Information -->
        <div class="form-group mb-6">
          <label class="form-label">Route Information *</label>
          <div class="route-inputs">
            <div class="route-input-group">
              <label class="route-label">From</label>
              <input 
                type="text" 
                [(ngModel)]="story.route.from"
                name="routeFrom"
                required
                placeholder="Starting city"
                class="form-input">
            </div>
            <div class="route-arrow">
              <i class="fas fa-arrow-right theme-text-secondary"></i>
            </div>
            <div class="route-input-group">
              <label class="route-label">To</label>
              <input 
                type="text" 
                [(ngModel)]="story.route.to"
                name="routeTo"
                required
                placeholder="Destination city"
                class="form-input">
            </div>
          </div>
        </div>

        <!-- Story Content -->
        <div class="form-group mb-6">
          <label class="form-label">Your Story *</label>
          <textarea 
            [(ngModel)]="story.content"
            name="content"
            required
            maxlength="2000"
            rows="8"
            placeholder="Share your travel experience, what made it special, any interesting incidents, people you met, or tips for other travelers..."
            class="form-textarea"></textarea>
          <div class="form-help">{{ story.content.length }}/2000 characters</div>
        </div>

        <!-- Image URL (Optional) -->
        <div class="form-group mb-6">
          <label class="form-label">Photo URL (Optional)</label>
          <input 
            type="url" 
            [(ngModel)]="story.imageUrl"
            name="imageUrl"
            placeholder="https://example.com/your-photo.jpg"
            class="form-input">
          <div class="form-help">Add a photo to make your story more engaging</div>
        </div>

        <!-- Tags -->
        <div class="form-group mb-6">
          <label class="form-label">Tags (Optional)</label>
          <div class="tags-input-container">
            <div class="tags-display" *ngIf="story.tags.length > 0">
              <span 
                *ngFor="let tag of story.tags; let i = index"
                class="tag-item">
                #{{ tag }}
                <button type="button" (click)="removeTag(i)" class="tag-remove">
                  <i class="fas fa-times"></i>
                </button>
              </span>
            </div>
            <div class="tag-input-wrapper">
              <input 
                type="text" 
                [(ngModel)]="tagInput"
                name="tagInput"
                (keypress)="onTagKeyPress($event)"
                placeholder="Add tags (press Enter to add)"
                class="form-input"
                maxlength="20">
              <button type="button" (click)="addTag()" class="add-tag-btn">
                <i class="fas fa-plus"></i>
              </button>
            </div>
          </div>
          <div class="form-help">Add up to 5 tags to help others find your story</div>
        </div>

        <!-- Privacy Setting -->
        <div class="form-group mb-8">
          <label class="checkbox-label">
            <input 
              type="checkbox" 
              [(ngModel)]="story.isPublic"
              name="isPublic"
              class="checkbox-input">
            <span class="checkbox-custom"></span>
            <span class="checkbox-text">Make this story public (visible to all community members)</span>
          </label>
        </div>

        <!-- Submit Button -->
        <div class="form-actions">
          <button 
            type="button" 
            (click)="goBack()"
            class="btn-secondary mr-4">
            Cancel
          </button>
          <button 
            type="submit" 
            [disabled]="isSubmitting || !storyForm.form.valid"
            class="btn-primary">
            <i *ngIf="isSubmitting" class="fas fa-spinner fa-spin mr-2"></i>
            <i *ngIf="!isSubmitting" class="fas fa-share mr-2"></i>
            {{ isSubmitting ? 'Sharing...' : 'Share Story' }}
          </button>
        </div>

      </form>
    </div>

  </div>
</div>